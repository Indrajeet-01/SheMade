{% extends 'base.html' %}
{% load static%}


{% block css %}
<link rel="stylesheet" href="/static/css/image_slider.css">
<style>
    .product-detail {
        display: flex; margin: 10px 3% 30px 3%; gap: 30px; position: relative; padding: 20px;
    }
    .images {
        flex: 1; margin-top: 30px; position: sticky;
    }
    .product_info {
        flex: 1; margin: 20px 20px 0 0 ;
    }
    .product_info h1 {
        color: #016A70;
    }
    .size p {
        font-size: 20px;
    }
    .price {
        position: relative; margin-top: 30px;
    }
    .add-to-cart-form {
        margin-top: 40px;
        margin-bottom: 40px;
display: flex;
align-items: center;
}

.quantity-controls {
display: flex;
align-items: center;
}

.quantity-controls button {
padding: 5px 10px;
height: 50px;
width: 40px;
font-size: 16px;
cursor: pointer;
}

.quantity-input {
outline: none;
height: 45px;
width: 45px;
text-align: center;
margin: 0 10px;
font-size: 16px;
}

.add-to-cart-button {
margin-top: 10px;
margin-bottom: 10px;
padding: 10px 20px;
font-size: 16px;
background-color: #007bff;
color: #fff;
border: none;
border-radius: 5px;
cursor: pointer;
}

.services {
display: flex; justify-content: space-around; margin-top: 10px;
}
.service_info {
align-items: center;
}
.service_icon{
background-color: aqua; height: 40px; width: 40px; position: relative; border-radius: 50%;
}

.service_icon i {
font-size: 25px; position: absolute; top: 50%; left: 50%; transform:translate(-50%, -50%) ;
}

.ingredients, .direction {
margin-top: 40px;
}
</style>
{% endblock %}


{% block content %}
<section>
    <div class="product-detail" >
        <div class="images">
            <div class="container">
                {% if product.images.all %}
                    {% for image in product.images.all %}
                        <div class="mySlides">
                            <div class="numbertext">{{ forloop.counter }} / {{ product.images.count }}</div>
                            <img src="{{ image.image_url }}" style="width:100%">
                        </div>
                    {% endfor %}
                    <a class="prev" onclick="plusSlides(-1)">❮</a>
                    <a class="next" onclick="plusSlides(1)">❯</a>
                    <div class="row">
                        {% for image in product.images.all %}
                            <div class="column">
                                <img class="demo cursor" src="{{ image.image_url }}" style="width:100%" onclick="currentSlide({{ forloop.counter0|add:1 }})">
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p>No images available for this product.</p>
                {% endif %}
            </div>
        </div>

        <div class="product_info" >
            <h1>{{ product.description }}</h1>
            <div class="size" >
                <p >SIZE : {{ product.content}}</p>

            </div>
            <div class="price" style="position: relative; margin-top: 30px;">
                <span style="position: relative; top: -0.6em; margin-right: 0.1em;">₹ </span><span style="font-size: 30px;">{{ product.price}}</span>
                <p style="margin-top: -5px;">(MRP Inclusive of all Taxes)</p>
            </div>
            
            <div class="add-to-cart-form">
                <form method="post" action="{% url 'add_to_cart' item_id=product.id %}">
                    {% csrf_token %}
                    <div class="quantity-controls">
                        <button type="button" class="decrease-quantity" data-field="quantity{{ product.id }}"><i class="fa-regular fa-minus"></i></button>
                        <input type="number" class="quantity-input" name="quantity" value="1" min="1" id="quantity{{ product.id }}" name="quantity">
                        <button type="button" class="increase-quantity" data-field="quantity{{ product.id }}"><i class="fa-regular fa-plus"></i></button>
                    </div>
                    <button type="submit" class="add-to-cart-button">Add to Cart</button>
                </form>
            </div>

            <hr/>
            <div class="services" >
                <div class="service_info">
                    <div class="service_icon">
                        <i class="fa-light fa-box"></i>
                    </div>
                    <p style="margin-bottom: -15px;">7 Days Service </p>
                    <p>Center Replacement</p>
                </div>
                <div>
                    <div class="service_icon">
                        <i class="fa-light fa-truck"></i>
                    </div>
                    <p>Free & Fast Delivery</p>
                </div>
                <div>
                    <div class="service_icon">
                        <i class="fa-light fa-shield-check"></i>

                    </div>
                    
                    <p>1 Year Warranty</p>
                </div>
                <div>
                    <div class="service_icon">
                        <i class="fa-light fa-hand-holding-dollar"></i>

                    </div>
                    
                    <p>Pay on Delivery</p>
                </div>
                
            </div>
            <hr/>
            <div class="ingredients" style="margin-top: 40px;">
                <h3>Ingredients</h3>
                <p >
                    {{ product.ingredients}}
                </p>

            </div>
            <div class="direction" style="margin-top: 40px;">
                <h3>How to Use ?</h3>
                <p >
                    {{ product.direction}}
                </p>

            </div>
        </div>
    </div>
</section>
{% endblock %}


{% block js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const decreaseButton = document.querySelector('.decrease-quantity');
    const increaseButton = document.querySelector('.increase-quantity');
    const quantityInput = document.querySelector('.quantity-input');

    decreaseButton.addEventListener('click', function() {
        let currentValue = parseInt(quantityInput.value);
        if (currentValue > 1) {
            quantityInput.value = currentValue - 1;
        }
    });

    increaseButton.addEventListener('click', function() {
        let currentValue = parseInt(quantityInput.value);
        quantityInput.value = currentValue + 1;
    });
});

</script>

<script>
    let slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("demo");
  let captionText = document.getElementById("caption");
  if (n > slides.length) {slideIndex = 1}
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";
  }
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";
  dots[slideIndex-1].className += " active";
  captionText.innerHTML = dots[slideIndex-1].alt;
}
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

{% endblock %}